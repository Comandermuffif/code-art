{
    "$id": "https://example.com/input.schema.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Input",
    "type": "object",
    "properties": {
        "drawMode": {
            "$ref": "#/$defs/drawMode"
        },
        "colorMode": {
            "$ref": "#/$defs/colorMode"
        }
    },
    "required": [
        "drawMode",
        "colorMode"
    ],
    "$defs": {
        "drawMode": {
            "oneOf": [
                {
                    "$ref": "#/$defs/CirclesDrawMode"
                },
                {
                    "$ref": "#/$defs/SquaresDrawMode"
                },
                {
                    "$ref": "#/$defs/TrianglesDrawMode"
                },
                {
                    "$ref": "#/$defs/VoronoiDrawMode"
                },
                {
                    "$ref": "#/$defs/WaveFunctionCollapseDrawMode"
                }
            ]
        },
        "colorMode": {
            "oneOf": [
                {
                    "$ref": "#/$defs/GradientColorMode"
                },
                {
                    "$ref": "#/$defs/GridColorMode"
                },
                {
                    "$ref": "#/$defs/LinearGradientColorMode"
                },
                {
                    "$ref": "#/$defs/ClampColorMode"
                },
                {
                    "$ref": "#/$defs/NormalColorMode"
                },
                {
                    "$ref": "#/$defs/RotateColorMode"
                },
                {
                    "$ref": "#/$defs/WaveFunctionCollapseColorMode"
                }
            ]
        },
        "colors": {
            "oneOf": [
                {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/color"
                    }
                },
                {
                    "$ref": "#/$defs/getSubcolors"
                }
            ]
        },
        "color": {
            "type": "string",
            "description": "Hex color",
            "pattern": "^#[a-f0-9A-F]{6}|^#[a-f0-9A-F]{8}"
        },
        "getSubcolors": {
            "type": "object",
            "required": [
                "getSubcolors"
            ],
            "properties": {
                "getSubcolors": {
                    "type": "object",
                    "properties": {
                        "colors": {
                            "$ref": "#/$defs/colors"
                        },
                        "subcount": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "colors",
                        "subcount"
                    ]
                }
            }
        },
        "GradientColorMode": {
            "type": "object",
            "required": [
                "GradientColorMode"
            ],
            "properties": {
                "GradientColorMode": {
                    "type": "object",
                    "properties": {
                        "colors": {
                            "$ref": "#/$defs/colors"
                        }
                    },
                    "required": [
                        "colors"
                    ]
                }
            }
        },
        "GridColorMode": {
            "type": "object",
            "required": [
                "GridColorMode"
            ],
            "properties": {
                "GridColorMode": {
                    "type": "object",
                    "properties": {
                        "colors": {
                            "$ref": "#/$defs/colors"
                        }
                    },
                    "required": [
                        "colors"
                    ]
                }
            }
        },
        "LinearGradientColorMode": {
            "type": "object",
            "required": [
                "LinearGradientColorMode"
            ],
            "properties": {
                "LinearGradientColorMode": {
                    "type": "object",
                    "properties": {},
                    "required": []
                }
            }
        },
        "ClampColorMode": {
            "type": "object",
            "required": [
                "ClampColorMode"
            ],
            "properties": {
                "ClampColorMode": {
                    "type": "object",
                    "properties": {
                        "child": {
                            "$ref": "#/$defs/colorMode"
                        }
                    },
                    "required": [
                        "child"
                    ]
                }
            }
        },
        "NormalColorMode": {
            "type": "object",
            "required": [
                "NormalColorMode"
            ],
            "properties": {
                "NormalColorMode": {
                    "type": "object",
                    "properties": {
                        "child": {
                            "$ref": "#/$defs/colorMode"
                        },
                        "xDivergance": {
                            "type": "number"
                        },
                        "yDivergance": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "child",
                        "xDivergance",
                        "yDivergance"
                    ]
                }
            }
        },
        "RotateColorMode": {
            "type": "object",
            "required": [
                "RotateColorMode"
            ],
            "properties": {
                "RotateColorMode": {
                    "type": "object",
                    "properties": {
                        "child": {
                            "$ref": "#/$defs/colorMode"
                        },
                        "angleDeg": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "child",
                        "angleDeg"
                    ]
                }
            }
        },
        "WaveFunctionCollapseColorMode": {
            "type": "object",
            "required": [
                "WaveFunctionCollapseColorMode"
            ],
            "properties": {
                "WaveFunctionCollapseColorMode": {
                    "type": "object",
                    "properties": {
                        "colors": {
                            "$ref": "#/$defs/colors"
                        },
                        "boardWidth": {
                            "type": "number"
                        },
                        "boardHeight": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "colors",
                        "boardWidth",
                        "boardHeight"
                    ]
                }
            }
        },
        "CirclesDrawMode": {
            "type": "object",
            "required": [
                "CirclesDrawMode"
            ],
            "properties": {
                "CirclesDrawMode": {
                    "type": "object",
                    "properties": {
                        "count": {
                            "type": "number"
                        },
                        "minSize": {
                            "type": "number"
                        },
                        "maxSize": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "count",
                        "minSize",
                        "maxSize"
                    ]
                }
            }
        },
        "SquaresDrawMode": {
            "type": "object",
            "required": [
                "SquaresDrawMode"
            ],
            "properties": {
                "SquaresDrawMode": {
                    "type": "object",
                    "properties": {
                        "count": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "count"
                    ]
                }
            }
        },
        "TrianglesDrawMode": {
            "type": "object",
            "required": [
                "TrianglesDrawMode"
            ],
            "properties": {
                "TrianglesDrawMode": {
                    "type": "object",
                    "properties": {
                        "count": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "count"
                    ]
                }
            }
        },
        "VoronoiDrawMode": {
            "type": "object",
            "required": [
                "VoronoiDrawMode"
            ],
            "properties": {
                "VoronoiDrawMode": {
                    "type": "object",
                    "properties": {
                        "count": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "count"
                    ]
                }
            }
        },
        "WaveFunctionCollapseDrawMode": {
            "type": "object",
            "required": [
                "WaveFunctionCollapseDrawMode"
            ],
            "properties": {
                "WaveFunctionCollapseDrawMode": {
                    "type": "object",
                    "properties": {
                        "boardWidth": {
                            "type": "number"
                        },
                        "boardHeight": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "boardWidth",
                        "boardHeight"
                    ]
                }
            }
        }
    }
}